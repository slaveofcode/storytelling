!function(e){"use strict";var t=e(window).height(),a=!1,o=1;function n(){return t=e(window).height(),e(".viewport").css("min-height",t),!1}e(".loading-wrapper").css({visibility:"visible"}).animate({opacity:"1"},600),e(window).on("load",function(){var t;e("#page-loader").delay(2e3).fadeOut(400,function(){}),n(),t=e("#header").outerHeight(),e(".main-carousel .slide-inner").css("padding-top",t)}),e(window).on("resize",function(){n()}),e(document).ready(function(){e("#content").waypoint(function(t){"down"===t?(e("#masthead").addClass("header-stick"),e("#back-to-top").removeClass("back-to-top-hide"),e("#music-control").addClass("with-back-top")):(e("#masthead").removeClass("header-stick"),e("#back-to-top").addClass("back-to-top-hide"),e("#music-control").removeClass("with-back-top"))},{offset:"-20px"}),e(".dropdown").on("mouseenter",function(){return e(this).addClass("open"),!1}),e(".dropdown").on("mouseleave",function(){return e(this).removeClass("open"),!1}),e(".back-to-top").on("click",function(){return e("html, body").animate({scrollTop:0},700),!1}),e('a[href*="#"]:not([href="#"])').on("click",function(){if(location.pathname.replace(/^\//,"")==this.pathname.replace(/^\//,"")&&location.hostname==this.hostname){var t=e(this.hash);if((t=t.length?t:e("[name="+this.hash.slice(1)+"]")).length)return e("html, body").animate({scrollTop:t.offset().top},1e3),!1}}),e("#MobileMenu").on("click",function(){var t=e("#header").outerHeight();e(this).toggleClass("menu-clicked"),e("#main-navigation").css("top",t).stop(0,0).slideToggle(),e("#main-navigation a").on("click",function(){e("#MobileMenu").stop(0,0).trigger("click")})}),e(".main-carousel").owlCarousel({items:1,nav:!0,loop:!1}),e("#contactForm").validate({submitHandler:function(t){e.ajax({type:"POST",url:"/comment",data:{name:e("#contactForm #name").val(),email:e("#contactForm #email").val(),message:e("#contactForm #message").val()},dataType:"json",success:function(t){"success"==t.response?(e("#contactWait").hide(),e("#contactSuccess").fadeIn(300).addClass("modal-show"),e("#contactForm #name, #contactForm #email, #contactForm #message").val("").blur()):(e("#contactWait").hide(),e("#contactError").fadeIn(300).addClass("modal-show"))},beforeSend:function(){e("#contactWait").fadeIn(200)}})}});var t=e(".modal-wrap");function a(){return t.fadeOut(300),!1}t.on("click",function(){t.fadeOut(300)}),t.on("click",function(){a()}),t.on("click",function(){a()});var o=new Howl({src:["sound/river.mp3","sound/river.webm"],autoplay:!0,loop:!0,volume:.6});e("#music-control").on("click",function(){e(this).hasClass("unplayed")?(o.play(),e(this).removeClass("unplayed"),e(this).addClass("played")):(o.pause(),e(this).removeClass("played"),e(this).addClass("unplayed"))})}),e(window).on("scroll",function(){e(window).scrollTop()+e(window).height()>e(document).height()-100&&!a&&(a=!0,e.ajax({type:"GET",url:"/comment_list?page="+o,dataType:"json",success:function(t){t.success&&t.data.length>0&&(e("#rsvp-list").removeClass("hidden"),e.each(t.data,function(t,a){var o=e("#rsvp-template").clone().html(),n=e(o);n.find(".c-username").text(a.name),n.find(".c-date").text(a.created_at),n.find(".media-comment").html(a.words),n.find("img.media-object").attr("src",a.image),e(".tab-content").append(n.html())}),e("#rsvp-list").removeClass("hidden"),a=!1,o++)}}))})}(jQuery);